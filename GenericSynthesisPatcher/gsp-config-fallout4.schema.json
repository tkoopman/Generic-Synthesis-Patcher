{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/tkoopman/Generic-Synthesis-Patcher/refs/heads/master/GenericSynthesisPatcher/gsp-config-fallout4.schema.json","title":"JSON Schema for Generic Synthesis Patcher (GSP) configuration files","type":"array","description":"An array of GSP rules / groups.","minItems":1,"items":{"anyOf":[{"$ref":"#/definitions/gspRule"},{"$ref":"#/definitions/gspGroup"}]},"definitions":{"gspBase":{"properties":{"$comment":true,"debug":{"description":"Enable debugging on this rule / group. If group will only debug the group's filters, use debug on child rules to also enable debug there.","type":"boolean","default":false},"priority":{"description":"Rules are applied in accending priority order. If multiple rules have same priority order is random.","type":"integer","default":0},"types":{"description":"Type(s) that this rule applies to.","$ref":"#/definitions/recordTypes"},"masters":{"description":"List of mod names where record must originate from.","type":["array","string"]},"!masters":{"description":"List of mod names where record must not originate from.","type":["array","string"]},"patchedBy":{"description":"List of mod names where record must of been patched by. Will not match record's master mod.","type":["array","string"]},"!patchedBy":{"description":"List of mod names where record must not of been patched by. Will not match record's master mod.","type":["array"]},"^patchedBy":{"description":"List of mod names where record must of been patched by equaly one of the listed mods. Will not match record's master mod.","type":["array"]},"&patchedBy":{"description":"List of mod names where record must of been patched by all of the listed mods. Will not match record's master mod.","type":["array"]},"patched":{"description":"Check if any property of a record has already been patched by another rule or not. Use null to ignore patched state.","type":["boolean","null"],"default":null}},"allOf":[{"$comment":"Only allow either masters, !masters or neither, never both.","oneOf":[{"required":["masters"],"not":{"required":["!masters"]},"errorMessage":"Can only use masters or !masters."},{"required":["!masters"],"not":{"required":["masters"]}},{"not":{"anyOf":[{"required":["masters"]},{"required":["!masters"]}]}}]},{"$comment":"Can only use patchedBy, !patchedBy, ^patchedBy or &patchedBy.","oneOf":[{"required":["patchedBy"],"not":{"anyOf":[{"required":["!patchedBy"]},{"required":["^patchedBy"]},{"required":["&patchedBy"]}]},"errorMessage":"Can only use one of the following patchedBy, !patchedBy, ^patchedBy or &patchedBy."},{"required":["!patchedBy"],"not":{"anyOf":[{"required":["patchedBy"]},{"required":["^patchedBy"]},{"required":["&patchedBy"]}]}},{"required":["^patchedBy"],"not":{"anyOf":[{"required":["patchedBy"]},{"required":["!patchedBy"]},{"required":["&patchedBy"]}]}},{"required":["&patchedBy"],"not":{"anyOf":[{"required":["patchedBy"]},{"required":["!patchedBy"]},{"required":["^patchedBy"]}]}},{"$comment":"Allow not having any of the patchedBy properties","not":{"anyOf":[{"required":["patchedBy"]},{"required":["!patchedBy"]},{"required":["^patchedBy"]},{"required":["&patchedBy"]}]}}]}]},"gspRule":{"description":"A GSP Rule","type":"object","properties":{"$comment":true,"debug":true,"priority":true,"types":true,"masters":true,"!masters":true,"patchedBy":true,"!patchedBy":true,"^patchedBy":true,"&patchedBy":true,"patched":true,"editorID":{"description":"List of Editor IDs to match against this rule. May be regular expression.","type":["array","string"]},"!editorID":{"description":"List of Editor IDs to exclude from this rule. May be regular expression.","type":["array","string"]},"formID":{"description":"List of Form IDs to match against this rule.","type":["array","string"]},"!formID":{"description":"List of Form IDs to exclude from this rule.","type":["array","string"]},"onlyIfDefault":{"description":"Filter only records that property action is targeting, is currently set to original value from master record.","type":"boolean","default":false},"matches":{"description":"Extra filter based on supported property matches.","type":"object"},"fill":{"description":"On matched records fill listed properties with provided value.","type":"object"},"forward":{"description":"On matched records forward listed property from non-winning version of record.","type":"object"},"forwardOptions":{"description":"Changes the way forward works.","$ref":"#/definitions/forwardOptions"},"merge":{"description":"On matched records, merge listed field values across instances of the same record.","type":["object","array","string"]},"copy":{"oneOf":[{"$ref":"#/definitions/deepCopyIn"},{"type":"array","items":{"$ref":"#/definitions/deepCopyIn"}}]}},"allOf":[{"$ref":"#/definitions/gspBase"},{"$comment":"Only allow either editorID, !editorID or neither, never both.","oneOf":[{"required":["editorID"],"not":{"required":["!editorID"]},"errorMessage":"Can only use editorID or !editorID."},{"required":["!editorID"],"not":{"required":["editorID"]}},{"not":{"anyOf":[{"required":["editorID"]},{"required":["!editorID"]}]}}]},{"$comment":"Only allow either formID, !formID or neither, never both.","oneOf":[{"required":["formID"],"not":{"required":["!formID"]},"errorMessage":"Can only use formID or !formID."},{"required":["!formID"],"not":{"required":["formID"]}},{"not":{"anyOf":[{"required":["formID"]},{"required":["!formID"]}]}}]}],"additionalProperties":false},"gspGroup":{"type":"object","properties":{"$comment":true,"debug":true,"priority":true,"types":true,"masters":true,"!masters":true,"patchedBy":true,"!patchedBy":true,"^patchedBy":true,"&patchedBy":true,"patched":true,"singleMatch":{"type":"boolean"},"rules":{"type":"array","items":{"$ref":"#/definitions/gspRule"}}},"allOf":[{"$ref":"#/definitions/gspBase"},{"properties":{"rules":{"type":"array","items":{"type":"object","not":{"required":["priority"]},"errorMessage":"Priority cannot be set on rules belonging to a group"}}}}],"additionalProperties":false},"deepCopyIn":{"description":"Use Mutagen's DeepCopyIn calls to copy value(s) from either previous instances of same record or provided record.","type":"object","properties":{"$comment":true,"fromID":{"description":"Copy from this record. FormID or EditorID can be used, or leave as null to copy from previous instance of current record. Record must be of the same type as destination.","type":"string"},"fromMod":{"description":"Copy from record in this mod. If multiple mods provided, will be selected based on forwardOptions. If fromID provided and this is null, will copy from the winning version.","type":["array","string"]},"mask":{"description":"Translation mask which determines what properties to copy. If no fromID set, default mask will copy all properties.","type":"object"}},"dependentRequired":{"fromID":["mask"]},"anyOf":[{"required":["fromID"],"errorMessage":"Must provide at least fromID and/or fromMod"},{"required":["fromMod"]}],"additionalProperties":false},"forwardOption":{"enum":["default","selfMasterOnly","indexedByField","nonDefault","nonNull","sort","HPU","random","defaultThenSelfMasterOnly"]},"forwardOptions":{"oneOf":[{"type":"array","items":{"$ref":"#/definitions/forwardOption"}},{"$ref":"#/definitions/forwardOption"}]},"recordTypes":{"oneOf":[{"type":"array","items":{"$ref":"#/definitions/recordType"}},{"$ref":"#/definitions/recordType"}]},"recordType":{"enum":["acousticSpace","actionRecord","activator","actorValueInformation","aDamageType","addonNode","aimModel","ammunition","animatedObject","animationSoundTagSet","aObjectModification","armor","armorAddon","artObject","associationType","attractionRule","audioCategorySnapshot","audioEffectChain","bendableSpline","bodyPartData","book","cameraPath","cameraShot","cell","class","climate","collisionLayer","colorRecord","combatStyle","component","constructibleObject","container","debris","defaultObject","defaultObjectManager","dialogBranch","dialogResponses","dialogTopic","dialogView","door","dualCastData","effectShader","encounterZone","equipType","explosion","faction","flora","footstep","footstepSet","formList","furniture","gameSetting","global","godRays","grass","hazard","headPart","holotape","idleAnimation","idleMarker","imageSpace","imageSpaceAdapter","impact","impactDataSet","ingestible","ingredient","instanceNamingRules","key","keyword","landscape","landscapeTexture","layer","lensFlare","leveledItem","leveledNpc","light","lightingTemplate","loadScreen","location","locationReferenceType","magicEffect","materialObject","materialSwap","materialType","message","miscItem","movableStatic","movementType","musicTrack","musicType","navigationMesh","navigationMeshInfoMap","navigationMeshObstacleManager","npc","objectEffect","objectVisibilityManager","outfit","package","packIn","perk","placedNpc","placedObject","projectile","quest","race","referenceGroup","region","relationship","reverbParameters","scene","sceneCollection","shaderParticleGeometry","soundCategory","soundDescriptor","soundKeywordMapping","soundMarker","soundOutputModel","spell","static","staticCollection","talkingActivator","terminal","textureSet","transform","tree","visualEffect","voiceType","water","weapon","weather","worldspace","zoom"]}}}